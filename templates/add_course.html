<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <title>新增課程</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <div class="container py-5">
        <h2 class="mb-4">新增課程</h2>

        <div class="card p-4 shadow rounded">
            <form id="courseForm">
                <div class="mb-3">
                    <label for="title" class="form-label">課程名稱</label>
                    <input type="text" class="form-control" id="title" placeholder="請輸入課程名稱" required>
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">課程說明</label>
                    <textarea class="form-control" id="description" rows="4" placeholder="請輸入課程內容" required></textarea>
                </div>

                <div class="mb-3">
                    <label for="teacherId" class="form-label">老師 ID</label>
                    <input type="number" class="form-control" id="teacherId" placeholder="請輸入老師的 ID" required>
                </div>

                <button type="submit" class="btn btn-primary">新增課程</button>
            </form>

            <div id="message" class="mt-3"></div>
        </div>
    </div>

    <script>
        document.getElementById("courseForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            const title = document.getElementById("title").value;
            const description = document.getElementById("description").value;
            const teacherId = document.getElementById("teacherId").value;
            const messageDiv = document.getElementById("message");

            try {
                const res = await fetch("/api/courses/", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        title: title,
                        description: description,
                        teacher_id: teacherId
                    })
                });

                const data = await res.json();

                if (res.ok) {
                    messageDiv.innerHTML = `<div class="alert alert-success">✅ ${data.message || "課程新增成功！"}</div>`;
                } else {
                    messageDiv.innerHTML = `<div class="alert alert-danger">❌ ${data.error || "新增失敗，請確認欄位輸入正確。"}</div>`;
                }
            } catch (err) {
                messageDiv.innerHTML = `<div class="alert alert-danger">⚠️ 發生錯誤：${err.message}</div>`;
            }
        });
    </script>

</body>

</html>